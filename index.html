<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Votumano</title>
  <!-- SDK de Telegram Mini Apps -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: linear-gradient(to bottom, #0a2540, #ff8c00);
      color: white;
      padding: 40px;
      margin: 0;
    }
    img { width: 180px; margin: 30px 0; }
    h1 { font-size: 32px; margin: 20px 0; }
    p { font-size: 18px; margin: 20px 0; }
    button {
      padding: 18px 40px;
      font-size: 20px;
      margin: 15px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      color: white;
    }
    .private-btn { background: #1e3a5f; }
    .public-btn { background: #ff6b00; }
  </style>
</head>
<body>
  <!-- CambiÃ¡ esta URL por la de tu logo real cuando lo subas a GitHub -->
  <img <img src="https://raw.githubusercontent.com/cahissa/votumano-miniapp/ebba3d50a37ce5115c9a41dd4f2a0ab5252bd52a/1000584678.jpg" alt="Votumano">

  <h1>Â¡Bienvenido a Votumano! ğŸ¤ğŸŒ</h1>
  <p>EstrechÃ¡ manos alrededor del mundo. Elige tu modo para empezar.</p>

  <button class="private-btn" onclick="selectMode('private')">
    Modo Privado ğŸ•µï¸
  </button>

  <button class="public-btn" onclick="selectMode('public')">
    Modo PÃºblico ğŸŒ
  </button>

  <!-- AquÃ­ va el Ãºnico script: todo el JavaScript corregido -->
  <script>
    // Inicializa la Mini App (obligatorio siempre primero)
    Telegram.WebApp.ready();

    let selectedMode = null;  // Recordamos quÃ© modo eligiÃ³ el usuario

    // FunciÃ³n llamada cuando tocas un botÃ³n interno
    function selectMode(mode) {
      selectedMode = mode;  // Guardamos 'private' o 'public'

      // Actualizamos el botÃ³n principal de Telegram (el azul abajo)
      if (mode === 'private') {
        Telegram.WebApp.MainButton.setText('Activar Modo Privado ğŸ•µï¸');
        Telegram.WebApp.MainButton.setParams({
          color: '#1e3a5f',       // Azul oscuro
          text_color: '#ffffff'
        });
      } else if (mode === 'public') {
        Telegram.WebApp.MainButton.setText('Activar Modo PÃºblico ğŸŒ');
        Telegram.WebApp.MainButton.setParams({
          color: '#ff6b00',       // Naranja cÃ¡lido
          text_color: '#ffffff'
        });
      }

      Telegram.WebApp.MainButton.show();  // Lo mostramos

      // Feedback inmediato
      alert(`Â¡Modo ${mode === 'private' ? 'Privado' : 'PÃºblico'} seleccionado! Toca el botÃ³n azul abajo para confirmar.`);
    }

    // QuÃ© pasa cuando tocan el botÃ³n principal (azul grande de Telegram)
    Telegram.WebApp.MainButton.onClick(() => {
      if (selectedMode) {
        alert(`Â¡Modo ${selectedMode === 'private' ? 'Privado ğŸ•µï¸' : 'PÃºblico ğŸŒ'} activado! PrÃ³ximamente vamos al feed personalizado.`);
        Telegram.WebApp.MainButton.hide();  // Lo ocultamos despuÃ©s de confirmar
        // AquÃ­ despuÃ©s pondremos el guardado en Supabase
      } else {
        alert('Primero elige un modo arriba.');
      }
    });

    // BotÃ³n principal inicial (aparece desde que carga la pÃ¡gina)
    Telegram.WebApp.MainButton.setText('Â¡Empezar! ğŸ¤');
    Telegram.WebApp.MainButton.setParams({
      color: '#ff8c00',
      text_color: '#ffffff'
    });
    Telegram.WebApp.MainButton.show();
  </script>
</body>
</html>
